<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        #nav,
        #dock,
        #first,
        #iframe {
            display: none;
        }
    </style>
</head>

<body>
    <div id="nav" class="navbar bg-base-100 outline-2 sticky top-0 z-10 flex justify-center p-4">
        <div></div>
        <div class="avatar pr-4">
            <div class="w-16 rounded-full">
                <img id="profilePic" alt="profilePic" />
            </div>
        </div>
        <div class="grid grid-cols-1">
            <div id="doctorName" class="text-lg font-semibold">name</div>
            <div id="doctorDep" class="text-base font-normal">department</div>
        </div>
    </div>

    <div id="content" class="bg-base-300 min-h-screen flex flex-col items-center justify-center">
        <div id="loading" class="loading loading-dots loading-xl"></div>
        <iframe id="iframe"
            data-tally-src="https://tally.so/embed/31LarW?hideTitle=1&transparentBackground=1&dynamicHeight=1"
            loading="lazy" width="100%" height="351" frameborder="0" marginheight="0" marginwidth="0"
            title="P4P - Upload"></iframe>

        <div id="first" class="card bg-base-100 card-lg w-xs md:w-lg lg:w-2xl xl:w-4xl border-black border">
            <div class="card-body flex flex-col items-center">
                <!--
                    <fieldset class="fieldset">
                        <legend class="fieldset-legend">Upload file</legend>
                        <select id="first_select" title="select" class="select">
                            <option disabled selected>Choose month</option>
                            <option>month 1</option>
                            <option>month 2</option>
                            <option>month 3</option>
                        </select>
                        <input id="first_input" placeholder="input" type="file" class="file-input file-input-ghost file-input-md lg:file-input-lg" />
                        <button id="first_submit" class="btn">submit</button>
                    </fieldset>
                -->
            </div>
        </div>
    </div>

    <div id="dock dock-lg" class="dock bg-base-100 outline-2">
        <button id="statusBtn" class="text-base-content">
            <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
                <path
                    d="M176 544C96.5 544 32 479.5 32 400C32 336.6 73 282.8 129.9 263.5C128.6 255.8 128 248 128 240C128 160.5 192.5 96 272 96C327.4 96 375.5 127.3 399.6 173.1C413.8 164.8 430.4 160 448 160C501 160 544 203 544 256C544 271.7 540.2 286.6 533.5 299.7C577.5 320 608 364.4 608 416C608 486.7 550.7 544 480 544L176 544zM337 255C327.6 245.6 312.4 245.6 303.1 255L231.1 327C221.7 336.4 221.7 351.6 231.1 360.9C240.5 370.2 255.7 370.3 265 360.9L296 329.9L296 432C296 445.3 306.7 456 320 456C333.3 456 344 445.3 344 432L344 329.9L375 360.9C384.4 370.3 399.6 370.3 408.9 360.9C418.2 351.5 418.3 336.3 408.9 327L336.9 255z" />
            </svg>
            <span class="dock-label">STATUS</span>
        </button>
        <button id="uploadBtn" class="text-md text-base-content">UPLOAD</button>
        <button id="signBtn" class="text-md text-base-content">SIGN</button>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>var d = document, w = "https://tally.so/widgets/embed.js", v = function () { "undefined" != typeof Tally ? Tally.loadEmbeds() : d.querySelectorAll("iframe[data-tally-src]:not([src])").forEach((function (e) { e.src = e.dataset.tallySrc })) }; if ("undefined" != typeof Tally) v(); else if (d.querySelector('script[src="' + w + '"]') == null) { var s = d.createElement("script"); s.src = w, s.onload = v, s.onerror = v, d.body.appendChild(s); }</script>
    <script>
        nav = document.getElementById("nav")
        dock = document.getElementById("dock")

        content = document.getElementById("content")
        loading = document.getElementById("loading")
        first = document.getElementById("first")
        iframe = document.getElementById("iframe")

        statusBtn = document.getElementById("statusBtn")
        uploadBtn = document.getElementById("uploadBtn")
        signBtn = document.getElementById("signBtn")
        profilePic = document.getElementById("profilePic")
        doctorName = document.getElementById("doctorName")
        doctorDep = document.getElementById("doctorDep")

        statusBtn.addEventListener("click", function (e) {
            this.classList.add("dock-active")
            uploadBtn.classList.remove("dock-active")
            signBtn.classList.remove("dock-active")
            iframe.style.display = "none"
            e.preventDefault()
        })

        uploadBtn.addEventListener("click", function (e) {
            this.classList.add("dock-active")
            statusBtn.classList.remove("dock-active")
            signBtn.classList.remove("dock-active")
            iframe.style.display = "block"
            e.preventDefault()
        })

        signBtn.addEventListener("click", function (e) {
            this.classList.add("dock-active")
            statusBtn.classList.remove("dock-active")
            uploadBtn.classList.remove("dock-active")
            iframe.style.display = "none"
            e.preventDefault()
        })

        const logInLIFF = async () => {
            await liff.init({ liffId: "2007211330-ykKaQeJg" })
            if (liff.isLoggedIn()) {
                loading.style.display = "none"
                nav.style.display = "flex"
                dock.style.display = "flex"
                content.classList.remove("justify-center")
                content.classList.add("pt-8", "md:pt-12", "lg:pt-16", "xl:pt-20")
                const profile = await liff.getProfile()
                profilePic.src = profile.pictureUrl

            } else {
                liff.login()
            }
        }

        logInLIFF();
    </script>

</body>

</html>