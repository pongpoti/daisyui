<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        #nav, #dock, #first, #iframe {
            display: none;
        }
    </style>
</head>

<body>
    <div id="nav" class="navbar bg-base-100 outline-2 sticky top-0 z-10 flex justify-center p-4">
        <div></div>
        <div class="avatar pr-4">
            <div class="w-16 rounded-full">
                <img id="profilePic" alt="profilePic" />
            </div>
        </div>
        <div class="grid grid-cols-1">
            <div id="doctorName" class="text-lg font-semibold">name</div>
            <div id="doctorDep" class="text-base font-normal">department</div>
        </div>
    </div>

    <div id="content" class="bg-base-300 min-h-screen flex flex-col items-center justify-center">
        <div id="loading" class="loading loading-dots loading-xl"></div>
        <iframe id="iframe"data-tally-src="https://tally.so/embed/31LarW?hideTitle=1&transparentBackground=1&dynamicHeight=1" loading="lazy" width="100%" height="351" frameborder="0" marginheight="0" marginwidth="0" title="P4P - Upload"></iframe>

        <div id="first" class="card bg-base-100 card-lg w-xs md:w-lg lg:w-2xl xl:w-4xl border-black border">
                <div class="card-body flex flex-col items-center">
                <!--
                    <fieldset class="fieldset">
                        <legend class="fieldset-legend">Upload file</legend>
                        <select id="first_select" title="select" class="select">
                            <option disabled selected>Choose month</option>
                            <option>month 1</option>
                            <option>month 2</option>
                            <option>month 3</option>
                        </select>
                        <input id="first_input" placeholder="input" type="file" class="file-input file-input-ghost file-input-md lg:file-input-lg" />
                        <button id="first_submit" class="btn">submit</button>
                    </fieldset>
                -->
                </div>
        </div>
    </div>

    <div id="dock" class="dock bg-base-100 outline-2">
        <button id="uploadBtn" class="text-md text-base-content hover:text-accent-content" disabled>UPLOAD</button>
        <button id="statusBtn" class="text-md text-base-content hover:text-accent-content">STATUS</button>
        <button id="incomeBtn" class="text-md text-base-content hover:text-accent-content">INCOME</button>
    </div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>var d=document,w="https://tally.so/widgets/embed.js",v=function(){"undefined"!=typeof Tally?Tally.loadEmbeds():d.querySelectorAll("iframe[data-tally-src]:not([src])").forEach((function(e){e.src=e.dataset.tallySrc}))};if("undefined"!=typeof Tally)v();else if(d.querySelector('script[src="'+w+'"]')==null){var s=d.createElement("script");s.src=w,s.onload=v,s.onerror=v,d.body.appendChild(s);}</script>
    <script>
        nav = document.getElementById("nav")
        dock = document.getElementById("dock")

        content = document.getElementById("content")
        loading = document.getElementById("loading")
        first = document.getElementById("first")
        iframe = document.getElementById("iframe")
       
        uploadBtn = document.getElementById("uploadBtn")
        statusBtn = document.getElementById("statusBtn")
        incomeBtn = document.getElementById("incomeBtn")
        profilePic = document.getElementById("profilePic")
        doctorName = document.getElementById("doctorName")
        doctorDep = document.getElementById("doctorDep")

        uploadBtn.addEventListener("click", function (e) {
            this.classList.add("dock-active")
            statusBtn.classList.remove("dock-active")
            incomeBtn.classList.remove("dock-active")
        })
        statusBtn.addEventListener("click", function (e) {
            this.classList.add("dock-active")
            uploadBtn.classList.remove("dock-active")
            incomeBtn.classList.remove("dock-active")
        })
        incomeBtn.addEventListener("click", function (e) {
            this.classList.add("dock-active")
            uploadBtn.classList.remove("dock-active")
            statusBtn.classList.remove("dock-active")
        })

        const logInLIFF = async () => {
            await liff.init({ liffId: "2007211330-ykKaQeJg" })
            if (liff.isLoggedIn()) {
                loading.style.display = "none"
                nav.style.display = "flex"
                dock.style.display = "flex"
                content.classList.remove("justify-center")
                content.classList.add("pt-8", "md:pt-12", "lg:pt-16", "xl:pt-20")
                //first.style.display = "flex"
                iframe.style.display = "block"
                const profile = await liff.getProfile()
                profilePic.src = profile.pictureUrl

            } else {
                liff.login()
            }
        }

        logInLIFF();
    </script>

</body>

</html>